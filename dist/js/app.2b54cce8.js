(function(t){function e(e){for(var n,o,c=e[0],r=e[1],u=e[2],d=0,h=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);l&&l(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,c=1;c<i.length;c++){var r=i[c];0!==s[r]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"01b5":function(t,e,i){"use strict";i("91e0")},"07fb":function(t,e,i){},3166:function(t,e,i){},"4ec8":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=i("b970"),a=(i("157a"),i("499a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Transition",{attrs:{name:t.transitionName,mode:t.$router.back?"out-in":"in-out"}},[i("router-view",{staticClass:"view"})],1)],1)}),o=[],c=i("5530"),r=(i("b0c0"),i("2f62")),u={data:function(){return{transitionName:"left"}},methods:Object(c["a"])({},Object(r["c"])(["setCounterMap"])),created:function(){var t=JSON.parse(localStorage.getItem("goods"))||{};this.setCounterMap(t)},watch:{$route:function(t,e){"classify"===t.name&&"search"===e.name&&(this.$router.back=!0),this.$router.back?this.transitionName="right":this.transitionName="left",this.$router.back=!1}}},l=u,d=(i("76e0"),i("2877")),h=Object(d["a"])(l,a,o,!1,null,"94336318",null),p=h.exports,g=i("8c4f"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-container"},[i("router-view"),i("TabBar")],1)},m=[],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-bar-container"},[i("van-tabbar",{attrs:{route:""}},[i("van-tabbar-item",{attrs:{to:{name:"Home"},icon:"home-o"}},[t._v("首页")]),i("van-tabbar-item",{attrs:{to:{name:"Classify"},icon:"apps-o"}},[t._v("分类")]),i("van-tabbar-item",{attrs:{badge:t.badge,to:{name:"Shopping"},icon:"shopping-cart-o",id:"shopCar"}},[t._v("购物车")]),i("van-tabbar-item",{attrs:{to:{name:"User"},icon:"user-circle-o"}},[t._v("我的")])],1)],1)},v=[],y=(i("07ac"),{computed:Object(c["a"])(Object(c["a"])({},Object(r["d"])(["counterMap"])),{},{badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>99?"99+":t}})}),L=y,j=Object(d["a"])(L,b,v,!1,null,null,null),k=j.exports,O={components:{TabBar:k}},_=O,C=Object(d["a"])(_,f,m,!1,null,null,null),w=C.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"classify-container"},[i("router-link",{staticClass:"search-btn",attrs:{to:{name:"Search"},tag:"div"}},[i("van-icon",{staticClass:"search-icon",attrs:{name:"search"}}),t._v(" 荔枝水果9.95 ")],1),i("FirstLevelNav"),t.showContent?[i("SideBar"),i("GoodsList")]:!0!==t.showContent?i("van-loading",{attrs:{type:"spinner",color:"#3296fa",size:"2rem",vertical:""}}):t._e()],2)},S=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"navWrap",staticClass:"first-level-nav-container"},t._l(t.menuList,(function(e,n){return i("div",{key:e.title,staticClass:"nav-item",class:{active:n===t.i},on:{click:function(e){return t.scrollTo(n,e)},touchstart:function(e){t.move=!0},touchend:function(e){t.move=!1}}},[i("div",{staticClass:"img-wrap"},[i("img",{attrs:{src:e.imgURL}})]),i("div",{staticClass:"text-wrap"},[t._v(" "+t._s(e.title)+" ")])])})),0)},G=[];function M(t,e,i,n){var s=this;clearInterval(this.timer);var a=7,o=0;e<0&&(a*=-1),this.timer=setInterval((function(){o+=a,i[n]=t+o,Math.abs(e)-Math.abs(o)<a&&(i[n]=t+e,clearInterval(s.timer))}),2)}var T={moveTo:M},$={data:function(){return{i:0,move:!1,menuList:[{title:"时令水果",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/时令水果.jpg"},{title:"酒水冲调",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/酒水冲调.jpg"},{title:"安心乳品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/安心乳品.jpg"},{title:"休闲零食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/休闲零食.jpg"},{title:"肉蛋食材",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/肉蛋食材.jpg"},{title:"新鲜蔬菜",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/新鲜食材.jpg"},{title:"熟食餐饮",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/熟食餐饮.jpg"},{title:"海鲜水产",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/海鲜水产.jpg"},{title:"粮油调味",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/粮油调味.jpg"},{title:"某手美食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/某手美食.jpg"},{title:"纸杯清洁",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/纸品清洁.jpg"},{title:"个人护理",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/个人护理.jpg"},{title:"美妆护肤",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/美妆护肤.jpg"},{title:"家居收纳",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家居收纳.jpg"},{title:"家用电器",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家用电器.jpg"},{title:"3C数码",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/3C数码.jpg"},{title:"母婴用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/母婴用品.jpg"},{title:"鲜花绿植",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/鲜花绿植.jpg"},{title:"宠物用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/宠物用品.jpg"},{title:"图书玩具",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/图书文具.jpg"},{title:"手表配饰",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/手表配饰.jpg"}],timer:null}},methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["getSideList"])),{},{scrollTo:function(t,e){if(this.move)return!1;this.i=t;var i=this.$refs.navWrap,n=i.offsetWidth,s=e.target.getBoundingClientRect().left,a=e.target.offsetWidth;return T.moveTo(i.scrollLeft,a/2+s-n/2,i,"scrollLeft"),this.getSideList(this.menuList[t].title),!0}}),created:function(){this.getSideList(this.menuList[0].title)}},B=$,U=(i("01b5"),Object(d["a"])(B,R,G,!1,null,"983de710",null)),E=U.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"sideBar",staticClass:"side-bar-container"},t._l(t.sideBarList,(function(e,n){return i("div",{key:e,staticClass:"item",class:{active:t.index===n},on:{touchend:function(e){return t.scrollTo(n,e)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[t._v(" "+t._s(0===n?"全部":e)+" ")])})),0)},I=[],N={data:function(){return{index:0,move:!1}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(r["b"])(["getGoodsList"])),Object(r["c"])(["resetGoodsList"])),{},{scrollTo:function(t,e){if(!this.move){this.index=t;var i=this.$refs.sideBar,n=e.target.getBoundingClientRect().top,s=i.getBoundingClientRect().top,a=e.target.offsetHeight,o=i.offsetHeight;T.moveTo(i.scrollTop,n+a/2-s-o/2,i,"scrollTop"),this.resetGoodsList(),this.getGoodsList({type:this.sideBarList[t],page:1,sort:"all"})}}}),computed:Object(r["d"])(["sideBarList"]),mounted:function(){}},z=N,W=(i("c2ec"),Object(d["a"])(z,H,I,!1,null,"985a56d4",null)),P=W.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-list-container"},[i("div",{staticClass:"list-header van-hairline--top van-hairline--bottom"},[i("div",{class:{active:"all"===t.type},on:{click:function(e){return t.changeType("all")}}},[t._v("综合")]),i("div",{class:{active:"sales"===t.type},on:{click:function(e){return t.changeType("sales")}}},[t._v("销量")]),i("div",{staticClass:"price",class:{"price-up":"price-up"==t.type,"price-down":"price-down"==t.type},on:{click:function(e){return t.changeType("price")}}},[t._v("价格")])]),i("div",{staticClass:"list-content"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!0},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e,n){return i("GoodsCard",t._b({key:n},"GoodsCard",e,!1))})),1)],1)],1)])},Y=[],A=i("1da1"),D=(i("96cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-card-container van-hairline--bottom"},[i("div",{staticClass:"card-img"},[i("img",{ref:"img",attrs:{src:t.images[0]}})]),i("div",{staticClass:"card-content"},[i("div",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{staticClass:"desc"},[t._v(t._s(t.desc))]),i("div",{staticClass:"tags"},t._l(t.tags,(function(e){return i("div",{key:e},[t._v(t._s(e))])})),0),i("div",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),i("div",{staticClass:"counter"},[t.counterMap[t.id]?i("div",{on:{click:function(e){return t.counter(t.id,-1)}}},[i("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png"}})]):t._e(),i("div",{staticClass:"num"},[t._v(t._s(t.counterMap[t.id]))]),i("div",{on:{click:function(e){return t.counter(t.id,1)}}},[i("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png"}})])])])])}),J=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.exist?i("div",{staticClass:"item",style:{width:t.imgWidth+"px",height:t.imgHeight+"px",opacity:t.opacity,transform:"translate("+t.startX+"px, "+t.startY+"px) scale("+t.sX+", "+t.sY+")"}},[i("img",{attrs:{src:t.src}})]):t._e()},Q=[],V={},q=V,K=(i("f8ac"),Object(d["a"])(q,F,Q,!1,null,"4f3b2e0e",null)),Z=K.exports,tt=n["a"].extend(Z),et=function(t){var e=t.imgWidth,i=t.imgHeight,n=t.imgLeft,s=t.imgTop,a=t.src,o=t.endX,c=t.endY,r=new tt({el:document.createElement("div"),data:function(){return{imgWidth:e,imgHeight:i,opacity:1,startX:n,startY:s,sX:1,sY:1,src:a,exist:!0}}});document.body.appendChild(r.$el),setTimeout((function(){r.opacity=0,r.startX=o,r.startY=c,r.sX=.2,r.sY=.2}),0),setTimeout((function(){r.exist=!1}),1100)},it={computed:Object(r["d"])(["counterMap"]),props:["tags","images","title","price","desc","id"],methods:Object(c["a"])(Object(c["a"])({},Object(r["c"])(["changeStorage","setBadge"])),{},{counter:function(t,e){this.changeStorage({id:t,value:e}),this.animate(e)},animate:function(t){if(-1!==t){var e=this.$refs.img,i=e.src,n=e.offsetWidth,s=e.offsetHeight,a=e.getBoundingClientRect(),o=a.left,c=a.top,r=document.getElementById("shopCar"),u=r.offsetWidth,l=r.offsetHeight,d=r.getBoundingClientRect(),h=d.left,p=d.top,g=h+u/2,f=p+l/2;et({imgWidth:n,imgHeight:s,imgLeft:o,imgTop:c,src:i,endX:g,endY:f})}}})},nt=it,st=(i("8d57"),Object(d["a"])(nt,D,J,!1,null,"46fad123",null)),at=st.exports,ot={components:{GoodsCard:at},data:function(){return{type:"all",isLoading:!1,loading:!1,finished:!1,page:1,sortType:"all"}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(r["c"])(["resetGoodsList"])),Object(r["b"])(["getGoodsList"])),{},{changeType:function(t){"all"===t?this.type="all":"sales"===t?this.type="sales":"price-up"===this.type?this.type="price-down":this.type="price-up",this.onRefresh()},onRefresh:function(){this.isLoading=!0,this.loading=!1,this.finished=!1,this.page=1,this.resetGoodsList(),this.getGoodsList({page:this.page,sort:this.type}),this.isLoading=!1},onLoad:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.page+=1,t.loading=!0,t.finished=!1,e.next=5,t.getGoodsList({page:t.page,sort:t.type});case 5:i=e.sent,i?t.loading=!1:t.finished=!0;case 7:case"end":return e.stop()}}),e)})))()}}),computed:Object(r["d"])({goodsList:function(t){return t.goodsList},total:function(t){return t.total}})},ct=ot,rt=(i("6520"),Object(d["a"])(ct,X,Y,!1,null,"3a0cf479",null)),ut=rt.exports,lt={components:{FirstLevelNav:E,SideBar:P,GoodsList:ut},computed:Object(r["d"])(["showContent","sideBarList"]),methods:Object(c["a"])(Object(c["a"])({},Object(r["c"])(["resetGoodsList"])),Object(r["b"])(["getGoodsList"])),watch:{showContent:function(){this.showContent&&(this.resetGoodsList(),this.getGoodsList({type:this.sideBarList[0],page:1,sort:"all"}))}}},dt=lt,ht=(i("e533"),Object(d["a"])(dt,x,S,!1,null,"c73ea4c6",null)),pt=ht.exports,gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopping-container"},[i("div",{staticClass:"nav-bar"},[i("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.onDel}})],1),i("div",{staticClass:"cards-list"},[i("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(e){return i("div",{key:e.id,staticClass:"card-box"},[i("van-checkbox",{staticClass:"check",attrs:{name:e.id},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),i("GoodsCard",t._b({},"GoodsCard",e,!1))],1)})),0)],1),i("van-submit-bar",{attrs:{price:t.allMoney,"button-text":"去提交("+t.totalNum+")"},on:{submit:t.onSubmit}},[i("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1)},ft=[],mt=(i("4de4"),i("caad"),i("2532"),i("159b"),i("b64b"),i("a15b"),i("d399")),bt=i("2241"),vt={components:{GoodsCard:at},data:function(){return{result:[],checked:!1,list:[]}},computed:Object(c["a"])(Object(c["a"])({},Object(r["d"])(["counterMap"])),{},{allMoney:function(){var t=this,e=this.list.filter((function(e){return t.result.includes(e.id)}));return e.reduce((function(e,i){var n=t.counterMap[i.id]||0;return n*i.price*100+e}),0)},totalNum:function(){var t=this,e=this.list.filter((function(e){return t.result.includes(e.id)}));return e.reduce((function(e,i){var n=t.counterMap[i.id]||0;return n+e}),0)}}),methods:Object(c["a"])(Object(c["a"])({},Object(r["c"])(["changeStorage"])),{},{onDel:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.result.length){e.next=3;break}return Object(mt["a"])("你没有选中商品"),e.abrupt("return");case 3:return e.prev=3,e.next=6,bt["a"].confirm({message:"您是否要删除已选中商品"});case 6:t.result.forEach((function(e){t.changeStorage({id:e,value:-1/0}),t.list=t.list.filter((function(e){return!t.result.includes(e.id)}))})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),Object(mt["a"])("用户点击了取消");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},getAllData:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var i,n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.counterMap,n=Object.keys(i),e.next=4,t.$api.getGoodsByIds(n.join());case 4:s=e.sent,a=s.list,t.list=a;case 7:case"end":return e.stop()}}),e)})))()},onSubmit:function(){0===this.result.length?Object(mt["a"])("去挑选你喜欢的商品再来哦"):Object(mt["a"])("结算成功")},checkAll:function(){this.checked?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll(!1)}}),created:function(){this.getAllData()},watch:{result:function(){this.result.length===this.list.length?this.checked=!0:this.checked=!1}}},yt=vt,Lt=(i("f37b"),Object(d["a"])(yt,gt,ft,!1,null,"fa779584",null)),jt=Lt.exports,kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-container"},[t._v("用户页面")])},Ot=[],_t={},Ct=_t,wt=Object(d["a"])(Ct,kt,Ot,!1,null,null,null),xt=wt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-head"},[i("van-icon",{staticClass:"arrow-left",attrs:{name:"arrow-left"},on:{touchend:function(e){return t.$router.goBack()}}}),i("van-search",{staticClass:"search-content",attrs:{"show-action":"",placeholder:t.place},on:{search:t.onSearch,input:t.onInput,focus:t.onFocus},scopedSlots:t._u([t.showLikeList?{key:"action",fn:function(){return[i("div",{on:{click:function(e){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}:{key:"action",fn:function(){return[i("div",[i("van-icon",{staticClass:"shop-car",attrs:{badge:t.badge,name:"cart-o",id:"shopCar"},on:{click:function(e){return t.$router.push({name:"Shopping"})}}})],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.likeList.length&&t.showLikeList?i("div",{staticClass:"like-list"},[i("van-list",t._l(t.likeList,(function(e){return i("van-cell",{key:e,on:{click:function(i){return t.onSearch(e)}}},[[i("span",{domProps:{innerHTML:t._s(t.formatHTML(e))}})]],2)})),1)],1):t._e(),t.showLikeList?t._e():i("div",{staticClass:"goods-list"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e,n){return i("GoodsCard",t._b({key:n},"GoodsCard",e,!1))})),1)],1),t.showLikeList&&t.likeList.length<=0?i("div",{staticClass:"history"},[i("MyHistory",{attrs:{list:t.searchList},on:{searchGoods:function(e){return t.onSearch(e)}}})],1):t._e()])},Rt=[],Gt=i("2909"),Mt=(i("ac1f"),i("841c"),i("99af"),i("7db0"),i("4e82"),i("4d63"),i("25f0"),i("5319"),i("9767"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-history-container"},[i("h4",[t._v("历史记录：")]),i("div",{staticClass:"history-list"},t._l(t.list,(function(e){return i("div",{key:e.time,staticClass:"list-item",on:{touchend:function(i){return t.search(e.value)}}},[t._v(t._s(e.value))])})),0)])}),Tt=[],$t={props:{list:{default:function(){return[]},type:Array}},methods:{search:function(t){this.$emit("searchGoods",t)}}},Bt=$t,Ut=(i("f8ace"),Object(d["a"])(Bt,Mt,Tt,!1,null,"56486a1a",null)),Et=Ut.exports,Ht={components:{GoodsCard:at,MyHistory:Et},data:function(){return{place:"酒",value:this.place,likeList:[],timer:null,page:1,size:5,goodsList:[],total:0,loading:!1,finished:!1,showLikeList:!0,searchList:[]}},computed:Object(c["a"])(Object(c["a"])({},Object(r["d"])(["counterMap"])),{},{badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>99?"99+":t}}),methods:{onLoad:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.search(t.value,t.page,t.size);case 2:i=e.sent,n=i.list,s=i.total,t.goodsList=[].concat(Object(Gt["a"])(t.goodsList),Object(Gt["a"])(n)),t.total=s,t.loading=!1,t.total<=t.goodsList.length?(t.finished=!0,t.loading=!0):t.page+=1;case 9:case"end":return e.stop()}}),e)})))()},onSearch:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.value=t||e.place,e.likeList=[],e.goodsList=[],e.page=1,e.loading=!0,e.finished=!1,e.onLoad(),e.showLikeList=!1,n=e.searchList.find((function(t){return t.value===e.value})),n?(n.time=(new Date).getTime(),e.searchList.sort((function(t,e){return e.time-t.time}))):(e.searchList.unshift({value:e.value,time:(new Date).getTime()}),e.searchList.length>=11&&e.searchList.pop()),localStorage.setItem("searchList",JSON.stringify(e.searchList));case 11:case"end":return i.stop()}}),i)})))()},onInput:function(){var t=this;""!==this.value?this.timer?(clearTimeout(this.timer),this.timer=null):this.timer=setTimeout(Object(A["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.fuzzyQuery(t.value);case 2:i=e.sent,t.likeList=i.result,clearTimeout(t.timer),t.timer=null;case 6:case"end":return e.stop()}}),e)}))),50):this.likeList=[]},onFocus:function(){this.showLikeList=!0},formatHTML:function(t){var e=new RegExp(this.value,"g"),i=t.replace(e,this.value.fontcolor("red"));return i}},created:function(){this.searchList=JSON.parse(localStorage.getItem("searchList"))||[]}},It=Ht,Nt=(i("99e5"),Object(d["a"])(It,St,Rt,!1,null,"b19bd5b2",null)),zt=Nt.exports;g["a"].prototype.back=!1,g["a"].prototype.goBack=function(){this.back=!0,this.go(-1)},n["a"].use(g["a"]);var Wt=[{path:"/home",name:"Home",component:w,children:[{path:"classify",name:"Classify",component:pt},{path:"shopping",name:"Shopping",component:jt},{path:"user",name:"User",component:xt}]},{path:"/search",name:"Search",component:zt},{path:"*",redirect:{name:"Classify"}}],Pt=new g["a"]({mode:"history",base:"/",routes:Wt}),Xt=Pt,Yt=i("bc3a"),At=i.n(Yt),Dt={getSideList:"/getsidebar",getGoodsList:"/getGoodsList",likeSearch:"/likeSearch",search:"/search",getGoodsByIds:"/getGoodsByIds"},Jt="https://mallapi.duyiedu.com/goods/",Ft=Jt,Qt=At.a.create({baseURL:Ft,params:{appkey:"dd_1597654682810"}});Qt.interceptors.response.use((function(t){return t.data}));var Vt=function(t){return Qt.get(Dt.getSideList,{params:{type:t}})},qt=function(t,e,i,n){return Qt.get(Dt.getGoodsList,{params:{type:t,page:e,size:i,sort:n}})},Kt=function(t,e,i){return Qt.get(Dt.search,{params:{type:t,page:e,size:i}})},Zt=function(t){return Qt.get(Dt.likeSearch,{params:{likeValue:t}})},te=function(t){return Qt.get(Dt.getGoodsByIds,{params:{value:t}})},ee={getSideBarList:Vt,getGoodsList:qt,search:Kt,fuzzyQuery:Zt,getGoodsByIds:te};n["a"].use(r["a"]);var ie=new r["a"].Store({state:{sideBarList:[],goodsList:[],size:5,showContent:!1,type:null,total:0,counterMap:{}},mutations:{changeStorage:function(t,e){var i=e.id,s=e.value;t.counterMap[i]?-1===s&&1===t.counterMap[i]||s===-1/0?n["a"].delete(t.counterMap,i):n["a"].set(t.counterMap,i,t.counterMap[i]+s):n["a"].set(t.counterMap,i,1),localStorage.setItem("goods",JSON.stringify(t.counterMap))},setSideList:function(t,e){t.sideBarList=e},setGoodsList:function(t,e){t.goodsList=[].concat(Object(Gt["a"])(t.goodsList),Object(Gt["a"])(e))},setShowContent:function(t,e){t.showContent=e},resetGoodsList:function(t){t.goodsList=[]},setGoodsType:function(t,e){t.type=e},setCounterMap:function(t,e){t.counterMap=e}},actions:{getSideList:function(t,e){var i=t.commit;i("setShowContent",!1),ee.getSideBarList(e).then((function(t){i("setSideList",t),i("setShowContent",!0)}))},getGoodsList:function(t,e){return Object(A["a"])(regeneratorRuntime.mark((function i(){var n,s,a,o,c,r,u,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.commit,s=t.state,a=e.page,o=e.sort,c=e.type||s.type,n("setGoodsType",c),i.next=6,ee.getGoodsList(c,a,s.size,o);case 6:if(r=i.sent,u=r.list,l=r.total,n("setGoodsList",u),!(l>s.goodsList.length)){i.next=12;break}return i.abrupt("return",!0);case 12:return i.abrupt("return",!1);case 13:case"end":return i.stop()}}),i)})))()}},modules:{}});i("bd4b");n["a"].use(s["a"]),n["a"].prototype.$api=ee,n["a"].config.productionTip=!1,new n["a"]({router:Xt,store:ie,render:function(t){return t(p)}}).$mount("#app")},"5aef":function(t,e,i){},6520:function(t,e,i){"use strict";i("7e88")},"76e0":function(t,e,i){"use strict";i("5aef")},"7e88":function(t,e,i){},"8d57":function(t,e,i){"use strict";i("e4a1")},"91e0":function(t,e,i){},"99e5":function(t,e,i){"use strict";i("e893f")},"9d90":function(t,e,i){},bd4b:function(t,e,i){},c2ec:function(t,e,i){"use strict";i("07fb")},d4b5:function(t,e,i){},e4a1:function(t,e,i){},e533:function(t,e,i){"use strict";i("9d90")},e893f:function(t,e,i){},f37b:function(t,e,i){"use strict";i("4ec8")},f8ac:function(t,e,i){"use strict";i("d4b5")},f8ace:function(t,e,i){"use strict";i("3166")}});
//# sourceMappingURL=app.2b54cce8.js.map